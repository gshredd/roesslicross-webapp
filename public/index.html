<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rösslicross 2025</title>
  <link rel="stylesheet" href="style.css" />
</head>

<script>
  (function(){
    const update = () => {
      document.body.classList.toggle('nav-scrolled', window.scrollY > 10);
    };
    update();
    window.addEventListener('scroll', update, { passive: true });
  })();
</script>

<body>

<!-- Navigation -->
<nav class="navbar" role="navigation" aria-label="Hauptnavigation">
  <input type="checkbox" id="menu-toggle" aria-hidden="true" />
  <label for="menu-toggle" class="menu-icon" aria-label="Menü öffnen/schließen" aria-controls="main-menu" aria-expanded="false">☰</label>

  <div class="menu" id="main-menu">
    <!-- Scrolle zu den Sektionen statt neue Seiten zu laden -->
    <a href="#infos">Start</a>
    <a href="#fotos">Fotos</a>
    <a href="#rangliste">Rangliste</a>
    <a href="#faq">FAQ</a>
    <a href="#anmeldung">Anmeldung</a>
  </div>
</nav>

<div class="main-wrapper">
  <div class="main-content" id="top">
    <header>
      <h1>ANMELDUNG INT. RÖSSLICROSS 2025</h1>
      <p>Are you the real horsewoman / horseman?</p>
    </header>

    <section id="infos">
      <h2>📅 Informationen</h2>
      <p><strong>Datum:</strong> 25. Oktober 2025</p>
      <p><strong>Ort:</strong> Casa Frisegg aka Neuhof 1, 8489 Wildberg</p>
      <p><strong>Einschreibung & Streckenbesichtigung:</strong> ab 17.00 Uhr</p>
      <p><strong>Start:</strong> 18.30 Uhr – Besammlung auf dem Hofplatz (Gemeinsame Einfahrrunde & Einstehen)</p>
      <p><strong>Festwirtschaft & Dinner:</strong> ca. 20.30 Uhr</p>
      <p><strong>Siegerzeremonie & Afterparty:</strong> ca. 22.00 Uhr</p>
      <p><strong>Kategorien:</strong> Girls · Boys · Savage Tandems</p>
      <p><strong>Startgeld:</strong> Race CHF 40.00 · Nur Dinner CHF 20.00 (Zahlig vor Ort in Bar oder mit TWINT)</p>
      <p><strong>Dinner:</strong> Food inkl. im Startgeld enthalte (Getränk separat)</p>
      <p><strong>Spezialpriis:</strong> Besti Verkleidig</p>
    </section>

    <section id="rules">
      <h2>📜 Rules</h2>
      <p><strong>Bike:</strong> Alli Velos (sofern fahrtauglich), e-Bikes ohni Akku (Velos us de Tandem-Kategorie muess mind. zwei Persone chönne befördere).</p>
      <p><strong>Helm:</strong> Stürz vom Pferd chönnd weh tue. Helm isch obligatorisch!</p>
      <p><strong>Liecht:</strong> S Renne findet im Dunkle statt und d Strecki isch nur teilwiis belüüchtet. Darum isch Liecht am Velo Pflicht!</p>
      <p><strong>Start:</strong> D Rennorganisation git d Startreihefolg vorem Start bekannt.</p>
      <p><strong>Startsignal:</strong> Vorem Start lauft de Song „One“ vo Scooter. Sobald de Satz „I am the Horseman“ fallt, mues s Startgetränk ustrunke werde – denn derf gstartet werde.</p>
      <p><strong>Abkürze:</strong> Offizielli Strecki nöd verlah; pro Rundi cha dr Shortcut bruucht werde → denn: 1× Krambambuli.</p>
      <p><strong>Rennduur:</strong> ca. 45 Minute</p>
    </section>

    <section id="faq">
      <h2>❓ FAQ</h2>
      <p><strong>Gits das Jahr endlich e Rangliste?</strong> Vermuetlich kriegemer das in dem Jahr tatsächliich ane!</p>
      <p><strong>Ich han letzt Jahr gwunne, kriege ich e Spezialbehandlig?</strong> Vorjahressieger:inne dörfed vorne iistah – mit spezieller Iilaufzeremonie.</p>
      <p><strong>Chume vo wiit her, kei Ahnig woni schlafe söll?</strong> Eifach fröge – mer hend div. Unterkunftsmöglichkeite vor Ort und ide Umgäbig.</p>
      <p><strong>Was wenns regnet?</strong> Denn wird’s erst richtig guet. Mer lueged, ob mer sogar Hochdruckreiniger & Dusche im Ziel hiikriege würed.</p>
      <p><strong>Ich bin Profi – derf ich mitfahre?</strong> Usnahmswiis.</p>
      <p><strong>Chan ich mich druf vorbereite?</strong> Hafer & Chraftfuetter zum Zmorge, drü Rüebli zum Zmittag.</p>
      <p><strong>Chan ich epper mitbringe?</strong> Gib churz Bescheid via WhatsApp (079 557 27 44) – mir finded es Plätzli meh :)</p>
      <p><strong>Chan ich eppis mitbringe?</strong> Es Velo, gueti Luune, chräftigi Bei und wenn dich als absoluti Legende verewige wotsch: en Dessert.</p>
      <p><strong>Empfang ide Casa Friesegg?</strong> Mit Swisscom Netz hesch volle 5G Empfang. Falls es anders Netz nutzisch eher gar kei Empfang. In dem Fall nimmsch also besser chli Bargeld und es Funkgrät mit. Ps. mir hend en mobile WLAN Router für s gröbste.</p>
      <p><strong>Chani mitem Auto cho?</strong> Parkplätz sind unterhalb vom Hof signalisiert.</p>
      <p><strong>Wie chume ich da wieder weg?</strong> Wenn nümm weisch wie heicho → bim OK melde; mir bringed dich zum nächschte Bahnhof.</p>
      <p><strong>Gits gueti Musig?</strong> Nei.</p>
    </section>

    <section id="anmeldung">
      <h2>📝 Anmeldung</h2>
      <form action="/anmelden" method="POST">
        <label for="prename">Vorname:</label><br>
        <input type="text" id="prename" name="prename" placeholder="Pferdinand" required><br>

        <label for="name">Name:</label><br>
        <input type="text" id="name" name="name" placeholder="Schimmel" required><br>

        <label for="email">E-Mail:</label><br>
        <input type="email" id="email" name="email" placeholder="sexy_horseboiii94@netlog.ch" autocomplete="email" required><br>

        <label for="phone">Handynummere:</label><br>
        <input type="tel" id="phone" name="phone" inputmode="tel" autocomplete="tel"
               placeholder="+41 79 123 s Rössli macht hüüü" required/><br>

        <label for="kategorie">Kategorie:</label><br>
        <select id="kategorie" name="kategorie">
          <option>Girls (inkl. Dinner)</option>
          <option>Boys (inkl. Dinner)</option>
          <option>Savage Tandems (inkl. Dinner)</option>
          <option>Zueluege (inkl. Dinner)</option>
        </select><br>

        <label for="consent">Haftungsausschluss:</label><br>
        <div class="consent">
          <input type="checkbox" id="consent" name="consent" required>
          <label for="consent">
            Ich bestätige, dass ich auf eigene Verantwortung am Rösslicross teilnehme
            und die Veranstalter:innen jede Haftung ablehnen.
          </label>
        </div><br>

        <button type="submit">Jetzt anmelden</button>
      </form>
    </section>

    <footer>
      <p>&copy; 2025 Rösslicross – <a href="mailto:info@roesslicross.ch">Kontakt</a></p>
    </footer>
  </div>
</div>

<!-- Auto-close fürs Mobilmenü & ARIA-Status updaten -->
<script>
  (function () {
    const toggle = document.getElementById('menu-toggle');
    const label  = document.querySelector('label[for="menu-toggle"]');
    const links  = document.querySelectorAll('.menu a');

    function syncAria() {
      if (label) label.setAttribute('aria-expanded', String(!!toggle.checked));
    }
    if (toggle) {
      toggle.addEventListener('change', syncAria);
      syncAria();
    }
    links.forEach(a => a.addEventListener('click', () => {
      if (toggle) { toggle.checked = false; syncAria(); }
    }));
  })();
</script>

<script>
  (function(){
    const apply = () => document.body.classList.toggle('nav-scrolled', window.scrollY > 10);
    apply();
    window.addEventListener('scroll', apply, { passive: true });
  })();
</script>

<script>
  (async () => {
    // Fotos
    const fotosSec = document.querySelector('#fotos');
    if (fotosSec) {
      try {
        const res = await fetch('/api/fotos');
        const files = await res.json();
        if (!files || files.length === 0) {
          fotosSec.insertAdjacentHTML('beforeend', '<p>📷 Noch keine Fotos online.</p>');
        } else {
          const grid = document.createElement('div');
          grid.className = 'gallery';
          files.forEach(f => {
            const img = document.createElement('img');
            img.src = '/fotos/' + encodeURIComponent(f);
            img.alt = 'Rösslicross Foto';
            grid.appendChild(img);
          });
          fotosSec.appendChild(grid);
        }
      } catch { fotosSec.insertAdjacentHTML('beforeend', '<p>📷 Noch keine Fotos online.</p>'); }
    }

    // Rangliste
    const rSec = document.querySelector('#rangliste');
    if (rSec) {
      try {
        const res = await fetch('/api/rangliste');
        const rows = await res.json();
        if (!rows || rows.length === 0) {
          rSec.insertAdjacentHTML('beforeend', '<p>🏁 Noch keine Rangliste veröffentlicht.</p>');
        } else {
          const table = document.createElement('table');
          table.className = 'results';
          table.innerHTML = '<thead><tr><th>Pos</th><th>Name</th><th>Kategorie</th><th>Zeit</th></tr></thead>';
          const tb = document.createElement('tbody');
          rows.forEach(r => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${r.position ?? ''}</td><td>${r.name ?? ''}</td><td>${r.category ?? ''}</td><td>${r.time ?? ''}</td>`;
            tb.appendChild(tr);
          });
          table.appendChild(tb);
          rSec.appendChild(table);
        }
      } catch { rSec.insertAdjacentHTML('beforeend', '<p>🏁 Noch keine Rangliste veröffentlicht.</p>'); }
    }
  })();
</script>

</body>
</html>
